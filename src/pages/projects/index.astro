---
import { getCollection } from "astro:content";
import { Image } from "astro:assets";
import Layout from "@/layouts/layout.astro";
import PageHeader from "@/components/page-header.astro";
import ProjectsIcon from "@/assets/projects.svg";
import Chevron from "@/assets/chevron_r.svg";

const projects = (await getCollection("projects")).sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<Layout title="Projects | Edward Vonschondorf" description="My web development projects.">
  <article class="z-10 container mx-auto max-w-3xl space-y-1.5 lg:space-y-3">
    <PageHeader header="Projects" Icon={ProjectsIcon}>
      Explore my featured web and game development projects. Try them out, browse the source code, and discover more on
      my <a
        href="https://github.com/Torvec"
        target="_blank"
        rel="noopener noreferrer external"
        class="font-medium text-orange-500 transition-colors duration-300 ease-in-out hover:text-stone-100">GitHub</a
      >.
    </PageHeader>
    <section class="columns-1 gap-3 sm:columns-2 lg:gap-6">
      {
        projects.map((project) => (
          <div class="mb-3 break-inside-avoid overflow-clip rounded-xl border border-stone-700 backdrop-blur-xs lg:mb-6">
            <a href={`/projects/${project.id}/`} class="group">
              <Image
                src={project.data.banner}
                alt={`Thumbnail for ${project.data.title}`}
                class="w-full border-b border-stone-700 transition-opacity duration-300 ease-in-out group-hover:opacity-70"
              />
            </a>
            <div class="space-y-3 p-3 transition-colors duration-300 ease-in-out hover:bg-stone-900/40 lg:p-6">
              <h2 class="font-bold text-stone-100">
                <a
                  href={`/projects/${project.id}/`}
                  class="group flex w-full flex-col items-baseline text-pretty sm:flex-row sm:gap-12">
                  <div class="flex w-full items-baseline justify-between overflow-hidden">
                    <span class="transition-color block text-pretty duration-300 ease-in-out group-hover:text-orange-600">
                      {project.data.title}
                    </span>
                    <Chevron class="translate-x-full text-orange-600 transition-transform duration-300 ease-in-out group-hover:-translate-x-full" />
                  </div>
                </a>
              </h2>
              <p class="text-stone-300">{project.data.description}</p>
            </div>
          </div>
        ))
      }
    </section>
  </article>
</Layout>
